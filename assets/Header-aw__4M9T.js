import{r as h,R as e}from"./index-Cs7sjTYM.js";import{B as _}from"./Base-fHV16vWU.js";import{p as k}from"./polymorphic-factory-23vJzvkj.js";import{c as r}from"./clsx-B-dksMZM.js";import{f as c}from"./factory-DehWrhRO.js";import{V as L}from"./VisuallyHidden-DonKESKA.js";const B=h.createContext({}),S=()=>h.useContext(B),q=B.Provider,y=({className:n,width:t=34,height:a=34,...i})=>e.createElement("svg",{className:r("nhsuk-icon nhsuk-icon__search",n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",width:t,height:a,...i},e.createElement("path",{d:"M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"}));y.displayName="SearchIcon";y.__docgenInfo={description:"",methods:[],displayName:"SearchIcon",props:{width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"34",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"34",computed:!1}}}};const N=({className:n})=>e.createElement("svg",{className:r("nhsuk-icon nhsuk-icon__chevron-down",n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false"},e.createElement("path",{d:"M15.5 12a1 1 0 0 1-.29.71l-5 5a1 1 0 0 1-1.42-1.42l4.3-4.29-4.3-4.29a1 1 0 0 1 1.42-1.42l5 5a1 1 0 0 1 .29.71z"}));N.displayName="ChevronDownIcon";N.__docgenInfo={description:"",methods:[],displayName:"ChevronDownIcon",props:{width:{required:!1,tsType:{name:"number"},description:""},height:{required:!1,tsType:{name:"number"},description:""}}};let V=class{constructor(){this.menuIsOpen=!1,this.navigation=document.querySelector(".nhsuk-navigation"),this.navigationList=document.querySelector(".nhsuk-header__navigation-list"),this.mobileMenu=document.createElement("ul"),this.mobileMenuToggleButton=document.querySelector(".nhsuk-header__menu-toggle"),this.mobileMenuCloseButton=document.createElement("button"),this.mobileMenuContainer=document.querySelector(".nhsuk-mobile-menu-container"),this.breakpoints=[],this.width=document.body.offsetWidth}init(){!this.navigation||!this.navigationList||!this.mobileMenuToggleButton||!this.mobileMenuContainer||(this.setupMobileMenu(),this.calculateBreakpoints(),this.updateNavigation(),this.doOnOrientationChange(),this.handleResize=this.debounce(()=>{this.calculateBreakpoints(),this.updateNavigation()}),this.mobileMenuToggleButton.addEventListener("click",this.toggleMobileMenu.bind(this)),window.addEventListener("resize",this.handleResize),window.addEventListener("orientationchange",this.doOnOrientationChange()))}debounce(t,a=100){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>{t.apply(this,s)},a)}}calculateBreakpoints(){let t=0;for(let a=0;a<this.navigationList.children.length;a++)t+=this.navigationList.children[a].offsetWidth,this.breakpoints[a]=t}setupMobileMenu(){this.mobileMenuContainer.appendChild(this.mobileMenu),this.mobileMenu.classList.add("nhsuk-header__drop-down","nhsuk-header__drop-down--hidden")}closeMobileMenu(){this.menuIsOpen=!1,this.mobileMenu.classList.add("nhsuk-header__drop-down--hidden"),this.navigation.style.marginBottom=0,this.mobileMenuToggleButton.setAttribute("aria-expanded","false"),this.mobileMenuToggleButton.focus(),this.mobileMenuCloseButton.removeEventListener("click",this.closeMobileMenu.bind(this)),document.removeEventListener("keydown",this.handleEscapeKey.bind(this))}handleEscapeKey(t){t.key==="Escape"&&this.closeMobileMenu()}openMobileMenu(){this.menuIsOpen=!0,this.mobileMenu.classList.remove("nhsuk-header__drop-down--hidden");const t=this.mobileMenu.offsetHeight;this.navigation.style.marginBottom=`${t}px`,this.mobileMenuToggleButton.setAttribute("aria-expanded","true"),document.addEventListener("keydown",this.handleEscapeKey.bind(this)),this.mobileMenuCloseButton.addEventListener("click",this.closeMobileMenu.bind(this))}toggleMobileMenu(){this.menuIsOpen?this.closeMobileMenu():this.openMobileMenu()}updateNavigation(){const t=this.navigation.offsetWidth;let a=this.navigationList.children.length;if(t<this.breakpoints[a-1]){if(this.mobileMenuToggleButton.classList.add("nhsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.add("nhsuk-mobile-menu-container--visible"),a===2)return;for(;t<this.breakpoints[a-1];)this.mobileMenu.insertBefore(this.navigationList.children[a-2],this.mobileMenu.firstChild),a-=1}else if(t>this.breakpoints[a])for(;t>this.breakpoints[a];)this.navigationList.insertBefore(this.mobileMenu.removeChild(this.mobileMenu.firstChild),this.mobileMenuContainer),a+=1;this.mobileMenu.children.length||(this.mobileMenuToggleButton.classList.remove("nhsuk-header__menu-toggle--visible"),this.mobileMenuContainer.classList.remove("nhsuk-mobile-menu-container--visible")),document.body.offsetWidth!==this.width&&this.menuIsOpen&&this.closeMobileMenu()}doOnOrientationChange(){switch(window.orientation){case 90:setTimeout(()=>{this.calculateBreakpoints(),this.updateNavigation()},200);break}}};const O=()=>{new V().init()},l=c(({children:n,className:t,serviceName:a,transactional:i,organisationName:s,organisationSplit:d,organisationDescriptor:o,variant:u="blue-header-blue-nav",...p},v)=>{const x=h.useMemo(()=>({serviceName:a,transactional:i,organisationName:s,organisationSplit:d,organisationDescriptor:o,white:u.includes("white-header"),whiteNav:u.includes("white-nav")}),[]);return e.createElement(q,{value:x},e.createElement("header",{className:r("nhsuk-header",{"nhsuk-header__transactional":i,"nhsuk-header--organisation":s,"nhsuk-header--white":u.includes("white-header"),"nhsuk-header--white-nav":u.includes("white-nav")},t),role:"banner",...p,ref:v},n))}),M=({children:n,className:t,...a})=>e.createElement("div",{className:r("nhsuk-header__container",t),...a},n),w=k(({className:n,as:t="a",variant:a,...i},s)=>{const{transactional:d,serviceName:o,organisationName:u,organisationSplit:p,organisationDescriptor:v}=S();return e.createElement("div",{className:r("nhsuk-header__logo",{"nhsuk-header__logo--only":a})},e.createElement(_,{as:t,className:r("nhsuk-header__link",{"nhsuk-header__transactional--logo":d,"nhsuk-header__link--service":o},n),...i,ref:s},e.createElement("svg",{className:"nhsuk-logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 16",height:"40",width:"100"},e.createElement("path",{className:"nhsuk-logo__background",fill:"#005eb8",d:"M0 0h40v16H0z"}),e.createElement("path",{className:"nhsuk-logo__text",fill:"#fff",d:"M3.9 1.5h4.4l2.6 9h.1l1.8-9h3.3l-2.8 13H9l-2.7-9h-.1l-1.8 9H1.1M17.3 1.5h3.6l-1 4.9h4L25 1.5h3.5l-2.7 13h-3.5l1.1-5.6h-4.1l-1.2 5.6h-3.4M37.7 4.4c-.7-.3-1.6-.6-2.9-.6-1.4 0-2.5.2-2.5 1.3 0 1.8 5.1 1.2 5.1 5.1 0 3.6-3.3 4.5-6.4 4.5-1.3 0-2.9-.3-4-.7l.8-2.7c.7.4 2.1.7 3.2.7s2.8-.2 2.8-1.5c0-2.1-5.1-1.3-5.1-5 0-3.4 2.9-4.4 5.8-4.4 1.6 0 3.1.2 4 .6"})),o&&e.createElement("span",{className:"nhsuk-header__service-name"},o),u&&e.createElement("span",{className:"nhsuk-organisation-name"},u,p&&e.createElement(e.Fragment,null," ",e.createElement("span",{className:"nhsuk-organisation-split"},p))),v&&e.createElement("span",{className:"nhsuk-organisation-descriptor"},v)))}),E=k(({className:n,as:t="a",...a},i)=>{const{transactional:s}=S();return s?e.createElement("div",{className:"nhsuk-header__transactional-service-name"},e.createElement(_,{as:t,className:r("nhsuk-header__transactional-service-name--link",n),...a,ref:i})):null}),H=({children:n,className:t,...a})=>e.createElement("div",{className:"nhsuk-navigation-container"},e.createElement("nav",{className:r("nhsuk-navigation",t),role:"navigation","aria-label":"Primary navigation",...a},n)),T=c(({children:n,className:t,...a},i)=>{const s=h.useRef(null);h.useImperativeHandle(i,()=>s.current),h.useEffect(()=>{if(!s.current)return;const o=s.current.querySelector("li.nhsuk-mobile-menu-container > ul.nhsuk-header__drop-down");o&&o.remove(),O()},[s,n]);const d=h.Children.toArray(n).filter(o=>e.isValidElement(o)&&o.type===g);return e.createElement("ul",{className:r("nhsuk-header__navigation-list",{"nhsuk-header__navigation-list--left-aligned":d.length<4},t),...a,ref:s},n)}),g=k(({className:n,variant:t,as:a="a",...i},s)=>e.createElement("li",{className:r("nhsuk-header__navigation-item",{"nhsuk-header__navigation-item--home":t==="home-link"})},e.createElement(_,{as:a,className:r("nhsuk-header__navigation-link",n),...i,ref:s}))),C=({children:n,className:t,...a})=>e.createElement("div",{className:r("nhsuk-header__content",t),...a},n),m=c(({children:n,className:t,inputProps:a={visuallyHiddenText:"Search the NHS website"},buttonProps:i={visuallyHiddenText:"Search"},...s},d)=>e.createElement("div",{className:"nhsuk-header__search"},e.createElement("div",{className:"nhsuk-header__search-wrap"},e.createElement("form",{className:r("nhsuk-header__search-form",t),role:"search",...s,ref:d},n||e.createElement(e.Fragment,null,e.createElement(f,{...a}),e.createElement(b,{...i})))))),f=c(({visuallyHiddenText:n,className:t,placeholder:a="Search",...i},s)=>e.createElement(e.Fragment,null,e.createElement("label",{className:"nhsuk-u-visually-hidden",htmlFor:"search-field"},n),e.createElement("input",{className:r("nhsuk-search__input",t),id:"search-field",name:"search-field",type:"search",placeholder:a,autoComplete:"off",...i,ref:s}))),b=c(({visuallyHiddenText:n,className:t,...a},i)=>e.createElement("button",{className:r("nhsuk-search__submit",t),...a,type:"submit",ref:i},e.createElement(y,null),e.createElement(L,null,n))),I=({visuallyHiddenText:n="Browse",children:t="More",className:a,...i})=>e.createElement("li",{className:"nhsuk-mobile-menu-container"},e.createElement("button",{className:r("nhsuk-header__menu-toggle nhsuk-header__navigation-link",a),id:"toggle-menu","aria-expanded":"false",...i,type:"button"},e.createElement(L,null,n)," ",t,e.createElement(N,null)));l.displayName="Header";M.displayName="Header.Container";w.displayName="Header.Logo";E.displayName="Header.TransactionLink";H.displayName="Header.Nav";T.displayName="Header.NavList";g.displayName="Header.NavItem";I.displayName="Header.MobileMenu";C.displayName="Header.Content";m.displayName="Header.Search";f.displayName="Header.Search.Input";b.displayName="Header.Search.Button";m.Input=f;m.Button=b;l.Container=M;l.Logo=w;l.TransactionLink=E;l.Nav=H;l.NavList=T;l.NavItem=g;l.MobileMenu=I;l.Content=C;l.Search=m;l.__docgenInfo={description:"",methods:[],displayName:"Header",props:{variant:{required:!1,tsType:{name:"union",raw:`| 'blue-header-blue-nav'
| 'blue-header-white-nave'
| 'white-header-blue-nav'
| 'white-header-white-nav'`,elements:[{name:"literal",value:"'blue-header-blue-nav'"},{name:"literal",value:"'blue-header-white-nave'"},{name:"literal",value:"'white-header-blue-nav'"},{name:"literal",value:"'white-header-white-nav'"}]},description:"",defaultValue:{value:"'blue-header-blue-nav'",computed:!1}}}};M.__docgenInfo={description:"",methods:[],displayName:"Header.Container"};w.__docgenInfo={description:"",methods:[],displayName:"Header.Logo",props:{"aria-label":{required:!0,tsType:{name:"string"},description:""},variant:{required:!1,tsType:{name:"literal",value:"'logo-only'"},description:"If set, there will be extra space around the logo to account for the lack of a service/oganisation name"},as:{required:!1,tsType:{name:"TComponent"},description:"The component to render as.",defaultValue:{value:"'a'",computed:!1}}}};E.__docgenInfo={description:"",methods:[],displayName:"Header.TransactionLink",props:{as:{required:!1,tsType:{name:"TComponent"},description:"The component to render as.",defaultValue:{value:"'a'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};H.__docgenInfo={description:"",methods:[],displayName:"Header.Nav"};T.__docgenInfo={description:"",methods:[],displayName:"Header.NavList"};g.__docgenInfo={description:"",methods:[],displayName:"Header.NavItem",props:{variant:{required:!1,tsType:{name:"literal",value:"'home-link'"},description:""},className:{required:!1,tsType:{name:"string"},description:""},as:{required:!1,tsType:{name:"TComponent"},description:"The component to render as.",defaultValue:{value:"'a'",computed:!1}}}};I.__docgenInfo={description:"",methods:[],displayName:"Header.MobileMenu",props:{visuallyHiddenText:{required:!1,tsType:{name:"string"},description:`Visually hidden text for screen readers.

@type {string | undefined}`,defaultValue:{value:"'Browse'",computed:!1}},children:{defaultValue:{value:"'More'",computed:!1},required:!1}}};C.__docgenInfo={description:"",methods:[],displayName:"Header.Content"};m.__docgenInfo={description:"",methods:[],displayName:"Header.Search",props:{inputProps:{defaultValue:{value:"{ visuallyHiddenText: 'Search the NHS website' }",computed:!1},required:!1},buttonProps:{defaultValue:{value:"{ visuallyHiddenText: 'Search' }",computed:!1},required:!1}}};f.__docgenInfo={description:"",methods:[],displayName:"Header.Search.Input",props:{placeholder:{defaultValue:{value:"'Search'",computed:!1},required:!1}}};b.__docgenInfo={description:"",methods:[],displayName:"Header.Search.Button"};export{l as H};
